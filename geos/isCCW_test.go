package geos

import (
	"fmt"
	"testing"

	"github.com/paulsmith/gogeos/geos"
)

func TestCCW(t *testing.T) {
	//wkt := "POLYGON ((733328.6335000004619360 2781299.1859000008553267, 733468.5757999997586012 2781413.0922999996691942, 733483.7632999997586012 2781308.4068999998271465, 733334.0575999999418855 2781196.6700999997556210, 733328.6335000004619360 2781299.1859000008553267), (733347.0755000002682209 2781442.3826000001281500, 733428.4373000003397465 2781483.6059000007808208, 733485.9329000003635883 2781452.1459999997168779, 733321.0398000003769994 2781342.0363999996334314, 733347.0755000002682209 2781442.3826000001281500))"
	wkt := "POLYGON ((733395.5157000003382564 2781185.1663000006228685, 733691.8496000003069639 2781174.5830000005662441, 733795.0372999999672174 2780944.3949999995529652, 733339.9530999995768070 2780826.6552000008523464, 733257.9320999998599291 2781001.2805000003427267, 733265.8695999998599291 2781117.6973999999463558, 733395.5157000003382564 2781185.1663000006228685), (733435.2033000001683831 2781096.5307000000029802, 733406.0990000003948808 2781013.1867999993264675, 733410.0678000003099442 2780908.6762000005692244, 733673.3287000004202127 2781010.5409999992698431, 733617.7660999996587634 2781101.8223999999463558, 733435.2033000001683831 2781096.5307000000029802))"
	geom, err := geos.FromWKT(wkt)
	if err != nil {
		fmt.Println("创建几何对象失败:", err)
		return
	}
	// 获取多边形的外部环（外部边界）
	exteriorRing, err := geom.Shell()
	coords, _ := exteriorRing.Coords()

	var ff bool

	ff = IsCCW(coords)
	if ff {
		fmt.Println("逆时针")
	} else {
		fmt.Println("顺时针")
	}

	// 获取多边形的内部环（hole边界）
	interiorRings, err := geom.Holes()
	for _, hole := range interiorRings {
		coords2, _ := hole.Coords()
		ff = IsCCW(coords2)
		if ff {
			fmt.Println("逆时针")
		} else {
			fmt.Println("顺时针")
		}
	}

}
